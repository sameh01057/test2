{"version":3,"sources":["components/Swap.jsx","utils/contracts.js","utils/useWeb3.jsx","utils/useContract.jsx","components/WalletConnect.jsx","App.js","reportWebVitals.js","Connector.jsx","index.js"],"names":["Swap","xen","useContract","Erc20","context","useWeb3Context","balance","setBalance","useState","sendAmount","setSendAmount","pairPrice","setPairPrice","useEffect","active","balanceOf","account","then","balanceInEth","ethers","utils","formatEther","catch","err","console","log","_jsx","_Fragment","children","_jsxs","className","style","marginLeft","src","alt","value","onChange","e","val","target","type","placeholder","readOnly","disabled","marginTop","onClick","async","superagent","require","response","get","text","response1","nonce","JSON","parse","provider","providers","Web3Provider","window","ethereum","send","signer","getSigner","signMessage","signature","result","slice","signature1","Buffer","from","Uint8Array","toString","response_","post","address","chainId","set","response1_","token","getContract","ABI","library","getAddress","isAddress","AddressZero","Error","concat","Contract","connectUnchecked","getProviderOrSigner","useActiveWeb3React","withSignerIfPossible","arguments","length","undefined","useMemo","error","WalletConnect","connectorName","networkId","unsetConnector","setConnector","App","isConnected","setConnected","reportWebVitals","onPerfEntry","Function","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","InjectedConnector","NetworkOnlyConnector","Connectors","connectors","MetaMask","supportedNetworks","Infura","providerURL","process","ReactDOM","render","React","StrictMode","libraryName","document","getElementById"],"mappings":"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","file":"static/js/main.128e76ad.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useWeb3Context } from \"web3-react\";\nimport { ethers } from \"ethers\";\n\nimport Erc20 from \"../abi/erc20.json\";\nimport { useContract } from \"../utils/useContract\";\n\nconst XEN = \"0x2ab0e9e4ee70fff1fb9d67031e44f6410170d00e\";\n// [0x8e870d67f660d95d5be530380d0ec0bd388289e1, 0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48]\n\nconst Swap = () => {\n  const xen = useContract(XEN, Erc20);\n\n  const context = useWeb3Context();\n  const [balance, setBalance] = useState(null);\n  const [sendAmount, setSendAmount] = useState(0);\n  const [pairPrice, setPairPrice] = useState(0);\n\n  // useEffect(() => {\n  //   console.log('[uni]', factoryContract);\n  //   if (factoryContract) {\n  //     factoryContract.getPair(USDT, MOCHI).then(res => console.log('[pair res]', res)).catch(err => console.log('[err]', err));\n  //   }\n  // }, [factoryContract]);\n\n  useEffect(() => {\n    if (context.active) {\n      xen\n        .balanceOf(context.account)\n        .then((balance) => {\n          const balanceInEth = ethers.utils.formatEther(balance);\n          setBalance(balanceInEth);\n        })\n        .catch((err) => console.log(\"[balance erro]\", err));\n    }\n  }, [context.active]);\n\n  const onSwap = async () => {\n    const superagent = require(\"superagent\");\n\n    (async function () {\n      const response = await superagent.get(\n        \"https://api.test.c3.io/v1/login/start?address=\" +\n          context.account +\n          \"&chainId=2\"\n      );\n      console.log(response.text);\n      const response1 = response.text;\n      const response2 = JSON.parse(response1);\n      const nonce = response2.nonce;\n      console.log(nonce);\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      await provider.send(\"eth_requestAccounts\", []);\n      const signer = provider.getSigner();\n      await signer.signMessage(nonce).then(async (signature) => {\n        console.log(\"signature: \" + signature);\n        var result = signature.slice(2);\n        const signature1 = Buffer.from(\n          new Uint8Array(Buffer.from(result, \"hex\"))\n        ).toString(\"base64\");\n        console.log(signature1);\n\n        const response_ = await superagent\n          .post(\"https://api.test.c3.io/v1/login/complete\")\n          .send({ address: context.account, chainId: 2, signature: signature1 }) // sends a JSON post body\n          .set(\"Content-Type\", \"application/json\");\n        console.log(response_.text);\n        const response1_ = response_.text;\n        const response2_ = JSON.parse(response1_);\n        const token = response2_.token;\n        console.log(token);\n\n        await superagent\n          .post(\"http://localhost:3000\")\n          .send({ address: context.account, chainId: 2, token: token }) // sends a JSON post body\n          .set(\"Content-Type\", \"application/json\");\n      });\n    })();\n  };\n\n  const onChange = (e) => {\n    const val = e.target.value;\n    setSendAmount(e.target.value);\n    setPairPrice(val * 200.5);\n  };\n\n  return (\n    <>\n      <div>\n        <div className=\"px-4 py-4 bg-white rounded-20\">\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <h2 className=\"title\">Swap</h2>\n            <div className=\"d-flex ml-auto\">\n              <button className=\"p-0 border-0 bg-transparent hover-op\">\n                <i className=\"material-icons color-icon\">history</i>\n              </button>\n              <button\n                className=\"p-0 border-0 bg-transparent hover-op\"\n                style={{ marginLeft: 18 }}\n              >\n                <i className=\"material-icons material-icons-outlined color-icon\">\n                  settings\n                </i>\n              </button>\n            </div>\n          </div>\n\n          <div className=\"bg-card rounded-12 mt-4\">\n            <div className=\"d-flex justify-content-between align-items-center px-12x py-10x\">\n              <div className=\"subtitle\">From</div>\n              <div className=\"text-balance\">Balance: {balance} XEN</div>\n            </div>\n            <hr className=\"m-0 color-line\" />\n            <div className=\"px-12x py-10x d-flex align-items-center\">\n              {/* <div className=\"size-32\">IMG</div> */}\n              <img src=\"/bnb.png\" alt=\"\" className=\"size-32\" />\n              <div className=\"ml-2 font-weight-bold text-token mr-3\">XEN</div>\n              <input\n                value={sendAmount}\n                onChange={onChange}\n                type=\"text\"\n                className=\"input-field ml-auto\"\n                placeholder=\"Enter Amount\"\n              />\n            </div>\n          </div>\n\n          <div className=\"d-flex w-100 justify-content-center my-3\">\n            <i className=\"material-icons\">arrow_downward</i>\n          </div>\n\n          <div className=\"bg-card rounded-12 mt-4\">\n            <div className=\"d-flex justify-content-between align-items-center px-12x py-10x\">\n              <div className=\"subtitle\">To</div>\n            </div>\n            <hr className=\"m-0 color-line\" />\n            <div className=\"px-12x py-10x d-flex align-items-center\">\n              {/* <div className=\"size-32\">IMG</div> */}\n              <img src=\"/mochi.png\" alt=\"\" className=\"size-32\" />\n              <div className=\"ml-2 font-weight-bold text-token mr-3\">USDC</div>\n              <input\n                value={pairPrice}\n                readOnly\n                type=\"text\"\n                className=\"input-field ml-auto\"\n                placeholder=\"Enter Amount\"\n                disabled\n              />\n            </div>\n          </div>\n\n          <div style={{ marginTop: 40 }}>\n            <button\n              onClick={onSwap}\n              className=\"w-100 btn-connect border-0 text-white d-flex justify-content-center align-items-center hover-op\"\n            >\n              <div>\n                <i className=\"material-icons text-white\">swap_vert</i>\n              </div>\n              <div className=\"btn-text ml-2\">Convert</div>\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Swap;\n","import {getAddress} from '@ethersproject/address';\nimport {Contract} from '@ethersproject/contracts';\nimport {AddressZero} from '@ethersproject/constants';\n\n// returns the checksummed address if the address is valid, otherwise returns false\nexport function isAddress(value) {\n  try {\n    return getAddress(value);\n  } catch {\n    return false;\n  }\n}\n// account is not optional\nexport function getSigner(\n  library,\n  account,\n) {\n  return library.getSigner(account).connectUnchecked();\n}\n\n// account is optional\nexport function getProviderOrSigner(\n  library,\n  account,\n) {\n  return account ? getSigner(library, account) : library;\n}\n\n// account is optional\nexport function getContract(\n  address,\n  ABI,\n  library,\n  account,\n) {\n  if (!isAddress(address) || address === AddressZero) {\n    throw Error(`Invalid 'address' parameter '${address}'.`);\n  }\n\n  return new Contract(\n    address,\n    ABI,\n    getProviderOrSigner(library, account),\n  );\n}","// import {useWeb3React as useWeb3ReactCore} from '@web3-react/core';\nimport { useWeb3Context } from \"web3-react\";\n\nexport function useActiveWeb3React() {\n  // const context = useWeb3ReactCore();\n  const context = useWeb3Context();\n\n  return context;\n}","import {useMemo} from 'react';\nimport { getContract } from './contracts';\nimport {useActiveWeb3React} from './useWeb3';\n\nexport const useContract = (\n  address,\n  ABI,\n  withSignerIfPossible = true,\n) => {\n  const {library, account} = useActiveWeb3React();\n\n  return useMemo(() => {\n    if (!address || !ABI || !library) return null;\n\n    try {\n      return getContract(\n        address,\n        ABI,\n        library,\n        withSignerIfPossible && account ? account : undefined,\n      );\n    } catch (error) {\n      console.error('Failed to get contract', error);\n      return null;\n    }\n  }, [address, ABI, library, withSignerIfPossible, account]);\n};","import React from \"react\";\n\nimport { useWeb3Context } from \"web3-react\";\n\nconst METAMASK = \"MetaMask\";\n\nconst WalletConnect = () => {\n\n  const context = useWeb3Context();\n\n  const { active, connectorName, account, networkId } = context;\n\n  console.log('[context]', context);\n\n  // if (context.active && context.connectorName === \"WalletConnect\") {\n  //   if (!context.account) {\n  //     WalletConnectQRCodeModal.open(\n  //       context.connector.walletConnector.uri,\n  //       () => {}\n  //     );\n  //   } else {\n  //     try {\n  //       WalletConnectQRCodeModal.close();\n  //     } catch {}\n  //   }\n  // }\n\n\n  const onClick = () => {\n    if(active) {\n      context.unsetConnector();\n    } else {\n      context.setConnector(METAMASK);\n    }\n  };\n\n  const getShortAddress = (address) => {\n    if(address && address.length >= 10) {\n      return `${address.slice(0, 6)}...${address.slice(-5)}`\n    }\n    return ''\n  }\n\n  return <>\n    <div>\n      <div className=\"bg-white p-connecter\">\n        <div className=\"\">\n          <button\n            onClick={onClick}\n            className=\"btn-connecter border-0 text-wallet\"\n          >\n            {\n              active ? \"DISCONNECT WALLET\" : \"CONNECT WALLET\"\n            }\n          </button>\n        </div>\n        <div className=\"btn-connecter d-flex align-items-center p-metamask\" style={{ marginTop: 12 }}>\n          <img src=\"/metamask.png\" className=\"size-36\" alt=\"\" />\n          <div className=\"ml-3 text-address ml-auto mr-2\">{getShortAddress(account)}</div>\n\n          <button className=\"p-0 border-0 bg-transparent d-flex justify-content-center align-items-center ml-auto\">\n            <i className=\"material-icons\">expand_more</i>\n          </button>\n        </div>\n      </div>\n    </div>\n  </>;\n};\n\nexport default WalletConnect;","import \"./App.css\";\nimport { useState } from \"react\";\nimport Swap from \"./components/Swap\";\nimport WalletConnect from \"./components/WalletConnect\";\n\nfunction App() {\n  const [isConnected, setConnected] = useState(false);\n\n  return (\n    <div className=\"App w-100 d-flex flex-column justify-content-center align-items-center py-5\">\n      <WalletConnect setConnected={setConnected} />\n\n      <div className=\"mt-3\">\n        <Swap />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { Connectors } from \"web3-react\";\n\nconst { InjectedConnector, NetworkOnlyConnector } = Connectors;\n\nconst MetaMask = new InjectedConnector({ supportedNetworks: [1, 4, 137, 56] });\n\nconst Infura = new NetworkOnlyConnector({\n  providerURL: process.env.REACT_APP_INFURA_ENDPOINT,\n});\n\nconst connectors = { MetaMask, Infura };\nexport default connectors;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport Web3Provider from 'web3-react/dist/provider';\nimport connectors from './Connector';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Web3Provider connectors={connectors} libraryName=\"ethers.js\">\n      <App />\n    </Web3Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}